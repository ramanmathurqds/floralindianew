!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.watermark=e():t.watermark=e()}(this,function(){return u={},n.m=r=[function(t,e,n){n(1),t.exports=n(2).default},function(t,e){"use strict";e.__esModule=!0,e.default=function(){},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r,o=n(3),i=n(5),c=n(6),a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(7)),f=n(10),u=n(11),l=(r=u)&&r.__esModule?r:{default:r};var d={init:function(){}};function s(n){var t,r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],u=(t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],(0,f.extend)((0,f.clone)(d),t)),r=r||(0,o.load)(n,u.init);return{dataUrl:function(e){var t=this.then(function(t){return(0,o.mapToCanvas)(t,l.default)}).then(function(t){return a.result(e,t)}).then(function(t){return e=t,n=l.default,r=e.canvas,u=e.sources,o=(0,i.dataUrl)(r),u.forEach(n.release),o;var e,n,r,u,o});return s(n,u,t)},load:function(e,n){var t=this.then(function(t){return(0,o.load)([t].concat(e),n)});return s(e,u,t)},render:function(){var t=this.then(function(t){return(0,o.load)([t])});return s(n,u,t)},blob:function(t){var e=this.dataUrl(t).then(c.blob);return s(n,u,e)},image:function(t){var e=this.dataUrl(t).then(o.createImage);return s(n,u,e)},then:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.then.apply(r,e)}}}s.image=a.image,s.text=a.text,s.destroy=function(){return l.default.clear()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLoader=i,e.load=function(t,e){for(var n=[],r=0;r<t.length;r++){var u=t[r],o=i(u)(u,e);n.push(o)}return Promise.all(n)},e.loadUrl=u,e.loadFile=o,e.createImage=function(t,e){var n=new Image;"function"==typeof e&&(n.onload=e);return n.src=t,n},e.imageToCanvas=c,e.mapToCanvas=function(t,e){return t.map(function(t){return c(t,e)})};var r=n(4);function i(t){var e;return"string"==(void 0===t?"undefined":(e=t)&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)?u:t instanceof Image?r.identity:o}function u(e,t){var n=new Image;return"function"==typeof t&&t(n),new Promise(function(t){n.onload=function(){return t(n)},n.src=e})}function o(t){var o=new FileReader;return new Promise(function(r){var u=new Image;o.onloadend=function(){return t=u,e=o.result,n=r,t.onload=function(){return n(t)},void(t.src=e);var t,e,n},o.readAsDataURL(t)})}function c(t,e){var n,r,u,o=e.pop();return n=t,u=(r=o).getContext("2d"),r.width=n.width,r.height=n.height,u.drawImage(n,0,0),r}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sequence=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce(function(t,e){return e.call(null,t)},t)}},e.identity=function(t){return t}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dataUrl=function(t){return t.toDataURL()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.blob=void 0,e.split=o,e.decode=i,e.uint8=c;var r=n(4),u=/^data:([^;]+);base64,(.*)$/;function o(t){return u.exec(t).slice(1)}function i(t){return window.atob(t)}function c(t){for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n}e.blob=(0,r.sequence)(o,function(t){return[i(t[1]),t[0]]},function(t){return new Blob([c(t[0])],{type:t[1]})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.text=e.image=void 0,e.result=function(t,e){return{canvas:t.apply(null,e),sources:e}};var r=o(n(8)),u=o(n(9));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}e.image=r,e.text=u},function(t,e){"use strict";function n(r,u,o){return o=o||1,function(t,e){var n=t.getContext("2d");return n.save(),n.globalAlpha=o,n.drawImage(e,r(t,e),u(t,e)),n.restore(),t}}Object.defineProperty(e,"__esModule",{value:!0}),e.atPos=n,e.lowerRight=function(t){return n(function(t,e){return t.width-(e.width+10)},function(t,e){return t.height-(e.height+10)},t)},e.upperRight=function(t){return n(function(t,e){return t.width-(e.width+10)},function(t,e){return 10},t)},e.lowerLeft=function(t){return n(function(t,e){return 10},function(t,e){return t.height-(e.height+10)},t)},e.upperLeft=function(t){return n(function(t,e){return 10},function(t,e){return 10},t)},e.center=function(t){return n(function(t,e){return(t.width-e.width)/2},function(t,e){return(t.height-e.height)/2},t)}},function(t,e){"use strict";function o(r,u,o,i,c,a){return a=a||1,function(t){var e=t.getContext("2d");e.save(),e.globalAlpha=a,e.fillStyle=c,e.font=i;var n=e.measureText(o);return e.fillText(o,r(t,n,e),u(t,n,e)),e.restore(),t}}Object.defineProperty(e,"__esModule",{value:!0}),e.atPos=o,e.lowerRight=function(t,e,n,r,u){return o(function(t,e){return t.width-(e.width+10)},function(t){return u||t.height-10},t,e,n,r)},e.lowerLeft=function(t,e,n,r,u){return o(function(){return 10},function(t){return u||t.height-10},t,e,n,r)},e.upperRight=function(t,e,n,r,u){return o(function(t,e){return t.width-(e.width+10)},function(){return u||20},t,e,n,r)},e.upperLeft=function(t,e,n,r,u){return o(function(){return 10},function(){return u||20},t,e,n,r)},e.center=function(t,e,n,r,u){return o(function(t,e,n){return n.textAlign="center",t.width/2},function(t,e,n){return n.textBaseline="middle",t.height/2},t,e,n,r)}},function(t,e){"use strict";function n(e,n){return Object.keys(n).forEach(function(t){return e[t]=n[t]}),e}Object.defineProperty(e,"__esModule",{value:!0}),e.extend=n,e.clone=function(t){return n({},t)}},function(t,e){"use strict";function n(){var e=[];return{pop:function(){return 0===this.length&&e.push(document.createElement("canvas")),e.pop()},get length(){return e.length},release:function(t){t.getContext("2d").clearRect(0,0,t.width,t.height),e.push(t)},clear:function(){e.splice(0,e.length)},get elements(){return e}}}Object.defineProperty(e,"__esModule",{value:!0});var r=(e.CanvasPool=n)();e.default=r}],n.c=u,n.p="",n(0);function n(t){if(u[t])return u[t].exports;var e=u[t]={exports:{},id:t,loaded:!1};return r[t].call(e.exports,e,e.exports,n),e.loaded=!0,e.exports}var r,u});